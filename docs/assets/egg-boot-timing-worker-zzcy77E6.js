var g=(e=>(e[e.BwNew=0]="BwNew",e[e.BwContinue=1]="BwContinue",e[e.Bw2New=2]="Bw2New",e[e.Bw2Continue=3]="Bw2Continue",e))(g||{});let c=null,u=null;async function P(){return c||u||(u=(async()=>{try{const e=await import("./wasm_pkg-D60-6A8E.js");let n;if(typeof process<"u"&&!!process.versions?.node){const o=await import("./__vite-browser-external-9wXp6ZBx.js"),r=(await import("./__vite-browser-external-9wXp6ZBx.js")).join(process.cwd(),"src/wasm/wasm_pkg_bg.wasm");n={module_or_path:o.readFileSync(r)}}else n={module_or_path:new URL("/pokemon-gen5-initseed/assets/wasm_pkg_bg-BRqvMkcK.wasm",import.meta.url)};return await e.default(n),c={IntegratedSeedSearcher:e.IntegratedSeedSearcher,BWGenerationConfig:e.BWGenerationConfig,PokemonGenerator:e.PokemonGenerator,SeedEnumerator:e.SeedEnumerator,EncounterType:e.EncounterType,GameVersion:e.GameVersion,GameMode:e.GameMode,EggSeedEnumeratorJs:e.EggSeedEnumeratorJs,ParentsIVsJs:e.ParentsIVsJs,GenerationConditionsJs:e.GenerationConditionsJs,EverstonePlanJs:e.EverstonePlanJs,IndividualFilterJs:e.IndividualFilterJs,TrainerIds:e.TrainerIds,GenderRatio:e.GenderRatio,StatRange:e.StatRange,EggBootTimingSearcher:e.EggBootTimingSearcher,EggBootTimingSearchResult:e.EggBootTimingSearchResult,calculate_game_offset:e.calculate_game_offset,sha1_hash_batch:e.sha1_hash_batch},c}catch(e){throw console.error("Failed to load WebAssembly module:",e),c=null,u=null,e}})(),u)}function B(){if(!c)throw new Error("WebAssembly module not initialized. Call initWasm() first.");return c}function C(){return c!==null}const h=[["A",0],["B",1],["Select",2],["Start",3],["[→]",4],["[←]",5],["[↑]",6],["[↓]",7],["R",8],["L",9],["X",10],["Y",11]],s=h.reduce((e,[n,t])=>(e[n]=t,e),{}),N=h.length,k=(1<<N)-1,S=12287;1<<s["[↑]"]|1<<s["[↓]"],1<<s["[←]"]|1<<s["[→]"],1<<s.Select|1<<s.Start|1<<s.L|1<<s.R;function D(e,n){return Number.isFinite(e)?(e&S^S)&k:0}function J(e){const n=[];for(const[t,o]of h)(e&1<<o)!==0&&n.push(t);return n}function M(e){const n=D(e);return J(n)}const O={B:{JPN:{nazo:[35741456,35741708,35741708,35741784,35741784],vcountTimerRanges:[[96,3193,3194]]},KOR:{nazo:[35743664,35743916,35743916,35743992,35743992],vcountTimerRanges:[[96,3204,3205]]},USA:{nazo:[35741872,35742124,35742124,35742200,35742200],vcountTimerRanges:[[96,3195,3196]]},GER:{nazo:[35741680,35741932,35741932,35742008,35742008],vcountTimerRanges:[[95,3191,3192]]},FRA:{nazo:[35741744,35741996,35741996,35742072,35742072],vcountTimerRanges:[[95,3187,3188]]},SPA:{nazo:[35741808,35742060,35742060,35742136,35742136],vcountTimerRanges:[[96,3206,3207]]},ITA:{nazo:[35741616,35741868,35741868,35741944,35741944],vcountTimerRanges:[[95,3178,3179]]}},W:{JPN:{nazo:[35741488,35741740,35741740,35741816,35741816],vcountTimerRanges:[[95,3175,3177]]},KOR:{nazo:[35743664,35743916,35743916,35743992,35743992],vcountTimerRanges:[[96,3195,3196]]},USA:{nazo:[35741904,35742156,35742156,35742232,35742232],vcountTimerRanges:[[96,3198,3200]]},GER:{nazo:[35741712,35741964,35741964,35742040,35742040],vcountTimerRanges:[[96,3194,3195]]},FRA:{nazo:[35741776,35742028,35742028,35742104,35742104],vcountTimerRanges:[[95,3182,3183]]},SPA:{nazo:[35741808,35742060,35742060,35742136,35742136],vcountTimerRanges:[[95,3184,3185]]},ITA:{nazo:[35741648,35741900,35741900,35741976,35741976],vcountTimerRanges:[[96,3195,3196]]}},B2:{JPN:{nazo:[34187484,33790665,35649968,35650052,35650052],vcountTimerRanges:[[130,4354,4360]]},KOR:{nazo:[34190860,33793237,35653456,35653540,35653540],vcountTimerRanges:[[130,4335,4340]]},USA:{nazo:[34189032,33791465,35651600,35651684,35651684],vcountTimerRanges:[[130,4354,4360]]},GER:{nazo:[34188840,33791337,35651408,35651492,35651492],vcountTimerRanges:[[129,4325,4328],[130,4329,4332]]},FRA:{nazo:[34189064,33791481,35651632,35651716,35651716],vcountTimerRanges:[[130,4340,4344]]},SPA:{nazo:[34188968,33791417,35651536,35651620,35651620],vcountTimerRanges:[[130,4353,4358]]},ITA:{nazo:[34188776,33791337,35651344,35651428,35651428],vcountTimerRanges:[[130,4359,4361],[131,4361,4365]]}},W2:{JPN:{nazo:[34187516,33790709,3565e4,35650084,35650084],vcountTimerRanges:[[130,4341,4347]]},KOR:{nazo:[34190892,33793281,35653488,35653572,35653572],vcountTimerRanges:[[129,4324,4329]]},USA:{nazo:[34189096,33791509,35651664,35651748,35651748],vcountTimerRanges:[[130,4338,4342]]},GER:{nazo:[34188872,33791381,35651440,35651524,35651524],vcountTimerRanges:[[130,4325,4333]]},FRA:{nazo:[34189096,33791525,35651664,35651748,35651748],vcountTimerRanges:[[130,4332,4336]]},SPA:{nazo:[34189e3,33791461,35651568,35651652,35651652],vcountTimerRanges:[[130,4335,4340]]},ITA:{nazo:[34188840,33791381,35651408,35651492,35651492],vcountTimerRanges:[[130,4351,4356]]}}},W={DS:8,DS_LITE:6,"3DS":9},a={params:null,running:!1,stopRequested:!1};function F(e){switch(e){case g.BwNew:return 0;case g.BwContinue:return 2;case g.Bw2New:return 5;case g.Bw2Continue:return 7;default:return 2}}const T=self,l=e=>T.postMessage(e);l({type:"READY",version:"1"});T.onmessage=e=>{const n=e.data;(async()=>{try{switch(n.type){case"START_SEARCH":await x(n.params);break;case"STOP":a.stopRequested=!0;break;default:break}}catch(t){const o=t instanceof Error?t.message:String(t);l({type:"ERROR",message:o,category:"RUNTIME",fatal:!1})}})()};async function x(e){if(a.running)return;a.params=e,a.stopRequested=!1,a.running=!0;const n=performance.now();try{await U();const t=$(e);l({type:"RESULTS",payload:{results:t,batchIndex:0}});const o={reason:a.stopRequested?"stopped":"completed",processedCombinations:0,totalCombinations:0,resultsCount:t.length,elapsedMs:performance.now()-n};l({type:"COMPLETE",payload:o})}catch(t){const o=t instanceof Error?t.message:String(t);l({type:"ERROR",message:o,category:"WASM_INIT",fatal:!0})}finally{E()}}async function U(){C()||await P()}function G(e,n){const t=O[e];if(!t)throw new Error(`Unknown ROM version: ${e}`);const o=t[n];if(!o)throw new Error(`Unknown ROM region: ${n}`);return o.nazo}function K(e,n){return n.type==="none"?e.EverstonePlanJs.None:e.EverstonePlanJs.fixed(n.nature)}function L(e,n){const t=new e.IndividualFilterJs;if(n.ivRanges&&Array.isArray(n.ivRanges))for(let o=0;o<6;o++){const i=n.ivRanges[o];i&&typeof i.min=="number"&&typeof i.max=="number"&&t.set_iv_range(o,i.min,i.max)}return n.nature!==void 0&&t.set_nature(n.nature),n.gender!==void 0&&t.set_gender(Y(n.gender)),n.ability!==void 0&&t.set_ability(n.ability),n.shiny!==void 0&&t.set_shiny(n.shiny),n.hiddenPowerType!==void 0&&t.set_hidden_power_type(n.hiddenPowerType),n.hiddenPowerPower!==void 0&&t.set_hidden_power_power(n.hiddenPowerPower),t}function Y(e){switch(e){case"male":return 0;case"female":return 1;case"genderless":return 2;default:return 0}}function H(e){switch(e){case 0:return"male";case 1:return"female";case 2:return"genderless";default:return"male"}}function V(e,n,t){return e?{type:"known",hpType:n,power:t}:{type:"unknown"}}function q(e,n){const t=Number(e.advance),o=[e.ivs[0]??0,e.ivs[1]??0,e.ivs[2]??0,e.ivs[3]??0,e.ivs[4]??0,e.ivs[5]??0];return{boot:{datetime:new Date(Date.UTC(e.year,e.month-1,e.date,e.hour,e.minute,e.second)),timer0:e.timer0,vcount:e.vcount,keyCode:e.keyCode,keyInputNames:M(e.keyCode),macAddress:n},lcgSeedHex:e.lcgSeedHex,egg:{advance:t,isStable:e.isStable,egg:{lcgSeedHex:e.lcgSeedHex,ivs:o,nature:e.nature,gender:H(e.gender),ability:e.ability,shiny:e.shiny,pid:e.pid,hiddenPower:V(e.hpKnown,e.hpType,e.hpPower)}},isStable:e.isStable}}function $(e){const t=B();if(!t.EggBootTimingSearcher)throw new Error("EggBootTimingSearcher not exposed in WASM");const o=G(e.romVersion,e.romRegion),i=new t.ParentsIVsJs;i.male=e.parents.male,i.female=e.parents.female;const r=new t.GenerationConditionsJs;r.has_nidoran_flag=e.conditions.hasNidoranFlag,r.set_everstone(K(t,e.conditions.everstone)),r.uses_ditto=e.conditions.usesDitto;const y=e.conditions.femaleParentAbility===2;r.allow_hidden_ability=y,r.female_parent_has_hidden=y,r.reroll_count=e.conditions.masudaMethod?3:0,r.set_trainer_ids(new t.TrainerIds(e.conditions.tid,e.conditions.sid)),r.set_gender_ratio(new t.GenderRatio(e.conditions.genderRatio.threshold,e.conditions.genderRatio.genderless));const v=e.filterDisabled||!e.filter?null:L(t,e.filter),p=W[e.hardware],R=new t.EggBootTimingSearcher(new Uint8Array(e.macAddress),new Uint32Array(o),e.hardware,e.keyInputMask,p,e.timeRange.hour.start,e.timeRange.hour.end,e.timeRange.minute.start,e.timeRange.minute.end,e.timeRange.second.start,e.timeRange.second.end,r,i,v,e.considerNpcConsumption,F(e.gameMode),BigInt(e.userOffset),e.advanceCount),_=[];try{const{dateRange:d}=e,m=new Date(d.startYear,d.startMonth-1,d.startDay),b=new Date(d.endYear,d.endMonth-1,d.endDay),I=Math.max(1,Math.floor((b.getTime()-m.getTime())/(1e3*60*60*24))+1)*24*60*60,w=R.search_eggs_integrated_simd(m.getFullYear(),m.getMonth()+1,m.getDate(),0,0,0,I,e.timer0Range.min,e.timer0Range.max,e.vcountRange.min,e.vcountRange.max);for(let f=0;f<w.length&&f<e.maxResults&&!a.stopRequested;f++){const z=w[f];_.push(q(z,e.macAddress))}}finally{R.free?.(),r.free?.(),i.free?.(),v?.free?.()}return _}function E(){a.running=!1,a.params=null,a.stopRequested=!1}T.onclose=()=>{E()};
