var m=(e=>(e[e.BwNew=0]="BwNew",e[e.BwContinue=1]="BwContinue",e[e.Bw2New=2]="Bw2New",e[e.Bw2Continue=3]="Bw2Continue",e))(m||{});const R=1e5,h=65535;function E(e){const t=[];(e.count<1||e.count>R)&&t.push(`count must be 1-${R}`),(e.conditions.tid<0||e.conditions.tid>h)&&t.push(`tid must be 0-${h}`),(e.conditions.sid<0||e.conditions.sid>h)&&t.push(`sid must be 0-${h}`);const n=(s,o)=>{s.forEach((r,c)=>{(r<0||r>32)&&t.push(`${o}[${c}] must be 0-32`)})};return n(e.parents.male,"parents.male"),n(e.parents.female,"parents.female"),e.filter&&e.filter.ivRanges.forEach((s,o)=>{(s.min<0||s.min>32)&&t.push(`filter.ivRanges[${o}].min must be 0-32`),(s.max<0||s.max>32)&&t.push(`filter.ivRanges[${o}].max must be 0-32`),s.min>s.max&&t.push(`filter.ivRanges[${o}].min must be <= max`)}),t}let u=null,l=null;async function T(){return u||l||(l=(async()=>{try{const e=await import("./wasm_pkg-DkL6Qplp.js");let t;if(typeof process<"u"&&!!process.versions?.node){const s=await import("./__vite-browser-external-9wXp6ZBx.js"),r=(await import("./__vite-browser-external-9wXp6ZBx.js")).join(process.cwd(),"src/wasm/wasm_pkg_bg.wasm");t={module_or_path:s.readFileSync(r)}}else t={module_or_path:new URL("/pokemon-gen5-initseed/assets/wasm_pkg_bg-DkPxcpUG.wasm",import.meta.url)};return await e.default(t),u={BWGenerationConfig:e.BWGenerationConfig,PokemonGenerator:e.PokemonGenerator,SeedEnumerator:e.SeedEnumerator,EncounterType:e.EncounterType,GameVersion:e.GameVersion,GameMode:e.GameMode,EggSeedEnumeratorJs:e.EggSeedEnumeratorJs,ParentsIVsJs:e.ParentsIVsJs,GenerationConditionsJs:e.GenerationConditionsJs,EverstonePlanJs:e.EverstonePlanJs,IndividualFilterJs:e.IndividualFilterJs,TrainerIds:e.TrainerIds,GenderRatio:e.GenderRatio,StatRange:e.StatRange,EggBootTimingSearchResult:e.EggBootTimingSearchResult,EggBootTimingSearchIterator:e.EggBootTimingSearchIterator,DSConfigJs:e.DSConfigJs,SegmentParamsJs:e.SegmentParamsJs,TimeRangeParamsJs:e.TimeRangeParamsJs,SearchRangeParamsJs:e.SearchRangeParamsJs,MtSeedBootTimingSearchIterator:e.MtSeedBootTimingSearchIterator,MtSeedBootTimingSearchResult:e.MtSeedBootTimingSearchResult,MtSeedBootTimingSearchResults:e.MtSeedBootTimingSearchResults,calculate_game_offset:e.calculate_game_offset,sha1_hash_batch:e.sha1_hash_batch,mt_seed_search_segment:e.mt_seed_search_segment},u}catch(e){throw console.error("Failed to load WebAssembly module:",e),u=null,l=null,e}})(),l)}function P(){if(!u)throw new Error("WebAssembly module not initialized. Call initWasm() first.");return u}function I(){return u!==null}const a={params:null,running:!1,stopRequested:!1};function J(e){switch(e){case m.BwNew:return 0;case m.BwContinue:return 2;case m.Bw2New:return 5;case m.Bw2Continue:return 7;default:return 2}}const _=self,d=e=>_.postMessage(e);d({type:"READY",version:"1"});_.onmessage=e=>{const t=e.data;(async()=>{try{switch(t.type){case"START_GENERATION":await B(t.params);break;case"STOP":a.stopRequested=!0;break;default:break}}catch(n){const s=n instanceof Error?n.message:String(n);d({type:"ERROR",message:s,category:"RUNTIME",fatal:!1})}})()};async function B(e){if(a.running)return;const t=E(e);if(t.length){d({type:"ERROR",message:t.join(", "),category:"VALIDATION",fatal:!1});return}a.params=e,a.stopRequested=!1,a.running=!0;try{await x();const n=D(e);U(n.results),d({type:"COMPLETE",payload:n.completion})}catch(n){const s=n instanceof Error?n.message:String(n);d({type:"ERROR",message:s,category:"WASM_INIT",fatal:!0})}finally{b()}}async function x(){I()||await T()}function W(e,t){return t.type==="none"?e.EverstonePlanJs.None:e.EverstonePlanJs.fixed(t.nature)}function C(e,t){const n=new e.IndividualFilterJs;if(!t)return n;for(let s=0;s<6;s++){const o=t.ivRanges[s];n.set_iv_range(s,o.min,o.max)}return t.nature!==void 0&&n.set_nature(t.nature),t.gender!==void 0&&n.set_gender(O(t.gender)),t.ability!==void 0&&n.set_ability(t.ability),t.shinyFilterMode!==void 0&&n.set_shiny_filter_mode(M(t.shinyFilterMode)),t.hiddenPowerType!==void 0&&n.set_hidden_power_type(t.hiddenPowerType),t.hiddenPowerPower!==void 0&&n.set_hidden_power_power(t.hiddenPowerPower),n}function O(e){switch(e){case"male":return 0;case"female":return 1;case"genderless":return 2;default:return 0}}function M(e){switch(e){case"all":return 0;case"shiny":return 1;case"star":return 2;case"square":return 3;case"non-shiny":return 4;default:return 0}}function k(e){switch(e){case 0:return"male";case 1:return"female";case 2:return"genderless";default:return"male"}}function A(e){return!e||e.type==="unknown"||e==="Unknown"?{type:"unknown"}:{type:"known",hpType:e.hp_type??e.hpType??0,power:e.power??0}}function V(e){if(!e)return null;try{const t=Number(e.advance),n=e.egg,s=n.lcg_seed_hex??n.lcgSeedHex??"0x0",o=n.mt_seed_hex??n.mtSeedHex??"00000000",r={lcgSeedHex:s,mtSeedHex:o,ivs:[n.ivs[0],n.ivs[1],n.ivs[2],n.ivs[3],n.ivs[4],n.ivs[5]],nature:(typeof n.nature=="number",n.nature),gender:k(typeof n.gender=="number"?n.gender:0),ability:typeof n.ability=="number"?n.ability:0,shiny:typeof n.shiny=="number"?n.shiny:0,pid:n.pid,hiddenPower:A(n.hidden_power??n.hiddenPower)};return{advance:t,egg:r,isStable:e.is_stable??e.isStable??!1}}catch{return null}}function D(e){const n=P();if(!n.EggSeedEnumeratorJs)throw new Error("EggSeedEnumeratorJs not exposed in WASM");const s=[];let o=0,r=0,c="max-count";const N=performance.now(),f=new n.ParentsIVsJs;f.male=e.parents.male,f.female=e.parents.female;const i=new n.GenerationConditionsJs;i.has_nidoran_flag=e.conditions.hasNidoranFlag,i.set_everstone(W(n,e.conditions.everstone)),i.uses_ditto=e.conditions.usesDitto;const y=e.conditions.femaleParentAbility===2;i.allow_hidden_ability=y,i.female_parent_has_hidden=y,i.reroll_count=e.conditions.masudaMethod?3:0,i.set_trainer_ids(new n.TrainerIds(e.conditions.tid,e.conditions.sid)),i.set_gender_ratio(new n.GenderRatio(e.conditions.genderRatio.threshold,e.conditions.genderRatio.genderless));const w=C(n,e.filterDisabled?null:e.filter),p=new n.EggSeedEnumeratorJs(e.baseSeed,e.userOffset,e.count,i,f,w,e.considerNpcConsumption,J(e.gameMode));try{for(;;){if(a.stopRequested){c="stopped";break}const g=p.next_egg();if(!g){c="max-count";break}o++;const S=V(g);S&&(s.push(S),r++)}}catch(g){throw c="error",g}finally{p.free(),i.free?.(),f.free?.(),w&&w.free?.()}const v={reason:c,processedCount:o,filteredCount:r,elapsedMs:performance.now()-N};return{results:s,completion:v}}function U(e){d({type:"RESULTS",payload:{results:e}})}function b(){a.running=!1,a.params=null,a.stopRequested=!1}_.onclose=()=>{b()};
